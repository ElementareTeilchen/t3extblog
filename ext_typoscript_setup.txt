config.tx_extbase{
    persistence{
        classes{
            Tx_T3extblog_Domain_Model_Post {
                mapping {
                    tableName = tx_t3blog_post
					columns {						
						sorting.mapOnProperty = sorting
						tstamp.mapOnProperty = tstamp
						deleted.mapOnProperty = deleted
						hidden.mapOnProperty = hidden
						title.mapOnProperty = title
						author.mapOnProperty = author
						date.mapOnProperty = publishDate
						content.mapOnProperty = content
						allow_comments.mapOnProperty = allowComments
						cat.mapOnProperty = categories
						tagClouds.mapOnProperty = tagCloud
						number_views.mapOnProperty = numberOfViews
					}
                }
            }            
            Tx_T3extblog_Domain_Model_Content {
				mapping {
					tableName = tt_content
					columns {
						altText.mapOnProperty = altText
						titleText.mapOnProperty = titleText
						colPos.mapOnProperty = colPos
					}
				}
            }            
            Tx_T3extblog_Domain_Model_Category {
                mapping {
                    tableName = tx_t3blog_cat
					columns {				
						sorting.mapOnProperty = sorting		
						tstamp.mapOnProperty = tstamp
						deleted.mapOnProperty = deleted
						hidden.mapOnProperty = hidden
						catname.mapOnProperty = name
						description.mapOnProperty = description
						parent_id.mapOnProperty = parentId
					}
                }
            }            
            Tx_T3extblog_Domain_Model_Comment {
                mapping {
                    tableName = tx_t3blog_com
					columns {				
						sorting.mapOnProperty = sorting		
						tstamp.mapOnProperty = tstamp
						deleted.mapOnProperty = deleted
						hidden.mapOnProperty = hidden						
						title.mapOnProperty = title
						fk_post.mapOnProperty = postId
						author.mapOnProperty = author
						email.mapOnProperty = email
						website.mapOnProperty = website
						date.mapOnProperty = date
						text.mapOnProperty = text
						approved.mapOnProperty = approved
						spam.mapOnProperty = spam
					}
                }
            }                      
            Tx_T3extblog_Domain_Model_BackendUser {
                mapping {
                    tableName = be_users 
					columns {				
						tstamp.mapOnProperty = tstamp
						deleted.mapOnProperty = deleted
						hidden.mapOnProperty = hidden						
						username.mapOnProperty = username
						realName.mapOnProperty = name
						email.mapOnProperty = email
					}
                }
            }          
            Tx_T3extblog_Domain_Model_Subscriber {
                mapping {
                    tableName = tx_t3blog_com_nl
					columns {				
						tstamp.mapOnProperty = tstamp
						deleted.mapOnProperty = deleted
						hidden.mapOnProperty = hidden						
						name.mapOnProperty = name
						email.mapOnProperty = email
						post_uid.mapOnProperty = postUid
						lastsent.mapOnProperty = lastSent
						code.mapOnProperty = code
					}
                }
            }          
    	}
    }
}

plugin.tx_t3extblog {
	persistence {
		# storagePid = {$plugin.tx_t3extblog.persistence.storagePid}
		storagePid = 172
	}
	features {
		rewrittenPropertyMapper = 1
	}
	settings {
		# used for mails, 
		blogName = Testblog
	
		blogsystem {		
			pid = 334
		
			posts {	
				viewCount {
					#views: Amount of seconds which have to pass by until an returning visitor is recounted. If you want to have counted each view just put a negative number.
					timePeriod = 10000
					countBackendUsers = 1
				}
				
				paginate {
					itemsPerPage = 10
					insertAbove = 0
					insertBelow = 1
					maximumNumberOfLinks = 100
				}
			}
			comments {
				allowed = 1
				# auto close comments, 0 = disabled
				# use http://www.php.net/manual/en/datetime.formats.relative.php
				allowedUntil = +6 months
					
				approvedByDefault = 1
				
				subscribeForComments = 1
				
				# splitLongWords = 1
							
				spamCheck {
					enable = 1
				
					redirectUrl {
						pid = 292
						arguments {
						}
					}
					
					# limit of spam points 
					threshold {			
						# saved but marked as spam
						markAsSpam = 10
						# to block comment (user could  try again), 0 = disable
						block = 20
						# to block comment and redirect user, 0 = disable
						redirect = 30
					}
				
					### spam checks, 0 = disbable	
					# simple checkbox which needs to be enabled
					isHumanCheckbox = 10
					# hidden honeypot fields
					honeypot = 3	
					# checks for useragent
					userAgent = 5
					# checks if client accepts cookies
					cookie = 2
					# cheks with EXT:sfpantispam against blacklist
					sfpantispam = 10
				}
				
				paginate {
					itemsPerPage = 10
					insertAbove = 1
					insertBelow = 0
					maximumNumberOfLinks = 100
				}
			}
		}
					
		subscriptionManager {
			pid = 335
		
			admin {
				enable = 1
				mailTo {
					info@felixnagel.com = Blog Moderator
				}
				mailFrom {
					no-reply@felixnagel.com = FelixNagel.com Blog
				}
			}				
			subscriber {
				enableNewCommentNotifications = 1
				
				# email link invalid after
				# use http://www.php.net/manual/en/datetime.formats.relative.php
				emailHashTimeout = +48 hours
				mailFrom {
					no-reply@felixnagel.com = FelixNagel.com Blog
				}
			}
		}			
		
		categories {
			paginate {
				itemsPerPage = 10
				insertAbove = 0
				insertBelow = 0
				maximumNumberOfLinks = 0
			}
		}
		
		latestPosts {
		
		}
		
		latestComments {
		
		}
		
		archive {
			
		}
		
		# some debug configs
		debug {
			disableEmailTransmission = 1
			logInDevlog = 1
		}
	}
}

# Rendering of content elements
lib.tx_t3extblog.contentElementRendering = RECORDS
lib.tx_t3extblog.contentElementRendering {
	tables = tt_content
	source.current = 1
	dontCheckPid = 1
}

# debugging
# Tx_Extbase_Utility_Debugger::var_dump("test");
config.no_cache=1